/*! Hanzi Writer v0.6.0 | https://chanind.github.io/hanzi-writer */
!function(t){var i={};function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=5)}([function(t,i,n){"use strict";(function(i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t){for(var i=Object(t),n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(function(t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}),i}function s(t){return Math.max.apply(null,t)}function u(t){return Math.min.apply(null,t)}var o=0;t.exports={inherits:function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},assign:r,arrayMax:s,arrayMin:u,average:function(t){return t.reduce(function(t,i){return i+t},0)/t.length},callIfExists:function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t&&t.apply(void 0,n)},copyAndMergeDeep:function t(i,s){var u=r({},i);for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]&&s[o]&&"object"===n(i[o])&&"object"===n(s[o])?u[o]=t(i[o],s[o]):u[o]=s[o]);return u},counter:function(){return o+=1},emptyFunc:function(){},getExtremes:function(t){var i=s(t),n=u(t);return[i,(i+n)/2,n]},isMSBrowser:function(){return i.navigator&&i.navigator.userAgent&&(i.navigator.userAgent.indexOf("Edge")>=0||i.navigator.userAgent.indexOf("MSIE")>=0)},timeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(i,n){setTimeout(i,t)})}}}).call(i,n(2))},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,u=void 0;try{for(var o,h=t[Symbol.iterator]();!(r=(o=h.next()).done)&&(n.push(o.value),!i||n.length!==i);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(s)throw u}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(0),u=s.arrayMin,o=s.arrayMax;function h(t,i){this.x=parseFloat(t,10),this.y=parseFloat(i,10)}h.prototype.subtract=function(t){return new h(this.x-t.x,this.y-t.y)},h.prototype.add=function(t){return new h(this.x+t.x,this.y+t.y)},h.prototype.getMagnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},h.prototype.equals=function(t){return!!t&&(t.x===this.x&&t.y===this.y)},h.getBounds=function(t){var i=t.map(function(t){return t.x}),n=t.map(function(t){return t.y}),r=o(i),s=o(n);return[new h(u(i),u(n)),new h(r,s)]},h.getOverallBounds=function(t){var i=[];return t.forEach(function(t){var n=t.getBounds(),s=r(n,2),u=s[0],o=s[1];i.push(u),i.push(o)}),h.getBounds(i)},h.getDistance=function(t,i){return t.subtract(i).getMagnitude()},h.cosineSimilarity=function(t,i){return(t.x*i.x+t.y*i.y)/t.getMagnitude()/i.getMagnitude()},t.exports=h},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){"use strict";function r(t){this.r=t,this.u=!1,this.h=[]}r.prototype.mount=function(t,i){return this},r.prototype.render=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this},r.prototype.registerChild=function(t){return this.h.push(t),t},r.prototype.destroy=function(){this.u=!0,this.h.forEach(function(t){return t.destroy()})},t.exports=r},function(t,i,n){"use strict";(function(i){var r=n(0).inherits,s=i.performance&&function(){return i.performance.now()}||function(){return Date.now()},u=i.requestAnimationFrame||function(t){return setTimeout(function(){return t(s())},1e3/60)},o=i.cancelAnimationFrame||clearTimeout;function h(t){return i.document.createElementNS("http://www.w3.org/2000/svg",t)}function e(t,i,n){t.setAttributeNS(null,i,n)}function c(t,i){Object.keys(i).forEach(function(n){return e(t,n,i[n])})}function f(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.e=t,this.f=i.duration||300,this.a=!1}function a(t,i,n){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.super_.call(this,function(t){var i=(r.v-r.w)*t+r.w;r.g.style[r.k]=i},s),this.g=t,this.k=i,this.v=n,this.b=s.ensureEndStyle}function v(t,i){this.svg=t,this.defs=i}f.prototype.start=function(){var t=this;return this.a=!0,this.S=s(),this.M=0,this.P(),new Promise(function(i,n){t.j=i})},f.prototype.P=function(){var t=this;this.O=u(function(i){return t.C(i)})},f.prototype.C=function(t){if(this.a){var i=Math.min(1,(t-this.S)/this.f);if(i===this.M)return this.P();this.M=i;var n,r=(n=i,-Math.cos(n*Math.PI)/2+.5);this.e(r),1===i?(this.O=null,this.finish()):this.P()}},f.prototype.finish=function(){this.a&&(this.a=!1,this.O&&o(this.O),this.j&&(this.j(),this.j=null))},r(a,f),a.prototype.start=function(){return this.w=parseFloat(this.g.style[this.k],10),this.w===this.v?Promise.resolve():a.super_.prototype.start.call(this)},a.prototype.finish=function(){return this.a&&this.b&&(this.g.style[this.k]=this.v),a.super_.prototype.finish.call(this)},v.prototype.createSubCanvas=function(){var t=h("g");return this.svg.appendChild(t),new v(t,this.defs)},v.init=function(t){var n=void 0,r=t;"string"==typeof t&&(r=i.document.getElementById(t));var s=r.nodeName.toUpperCase();"SVG"===s||"G"===s?n=r:(n=h("svg"),r.appendChild(n)),c(n,{width:"100%",height:"100%"});var u=h("defs");return n.appendChild(u),new v(n,u)},v.prototype.remove=function(){this.svg.parentNode.removeChild(this.svg)},t.exports={createElm:h,attrs:c,attr:e,Canvas:v,Tween:f,StyleTween:a,getPathString:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0],r=t.slice(1),s="M "+n.x+" "+n.y;return r.forEach(function(t){s+=" L "+t.x+" "+t.y}),i&&(s+="Z"),s}}}).call(i,n(2))},function(t,i,n){"use strict";(function(i){var r=n(6),s=n(10),u=n(1),o=n(11),h=n(14),e=n(15),c=n(4),f=n(19),a=n(20),v=n(22),l=n(0),d=l.assign,w=l.isMSBrowser,y=l.timeout,m={charDataLoader:f,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",showHintAfterMisses:3,highlightOnComplete:!0,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,usePolygonMasks:w()};function g(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.F=new a,this.r=c.Canvas.init(t),this.D=this.A(n),this.L=new v(this.D),this.setCharacter(i),this.T(),this.W=null}if(g.prototype.showCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.U(function(i){return t.I.show(i)},i)},g.prototype.hideCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.U(function(i){return t.I.hide(i)},i)},g.prototype.animateCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.U(function(i){return t.I.animate(i)},i)},g.prototype.loopCharacterAnimation=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.U(function n(r){if(!r.isActive())return null;var s=d({},t.D,i).delayBetweenLoops,u=t.I.animate(r);return u?u.then(function(){return y(s)}).then(function(){return n(r)}):null},i)},g.prototype.showOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.U(function(i){return t.R.show(i)},i)},g.prototype.hideOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.U(function(i){return t.R.hide(i)},i)},g.prototype.quiz=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.B(function(){t.cancelQuiz(),t.W=new e({canvas:t.G,animator:t.F,character:t.H,characterRenderer:t.I,highlightRenderer:t.N,quizOptions:d({},t.D,i),userStrokeOptions:t.z})})},g.prototype.cancelQuiz=function(){this.W&&this.W.cancel(),this.W=null},g.prototype.setCharacter=function(t){var i=this;return this.cancelQuiz(),this.q=t,this.F.cancel(),this.J&&this.J.destroy(),this.J=null,this.V=this.L.loadCharData(t).then(function(n){if(!i.L.loadingFailed){var u=new o;i.H=u.generateCharacter(t,n),i.Z=new h(i.H,i.D),i.J=new r(i.H,i.Z),i.K=new s(i.H,i.D),i.J.mount(i.r,i.K.state),i.J.render(i.K.state)}}),this.V},g.prototype.A=function(t){var i=d({},m,t);return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(i.strokeAnimationSpeed=500/i.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(i.strokeHighlightSpeed=500/i.strokeHighlightDuration),this.Q(i)},g.prototype.Q=function(t){var i=d({},t);if(i.width&&!i.height)i.height=i.width;else if(i.height&&!i.width)i.width=i.height;else if(!i.width&&!i.height){var n=this.r.svg.getBoundingClientRect(),r=n.width,s=n.height,u=Math.min(r,s);i.width=u,i.height=u}return i},g.prototype.B=function(t){var i=this;return this.L.loadingFailed?(this.setCharacter(this.q),Promise.resolve().then(function(){if(!i.L.loadingFailed)return i.B(t)})):this.V.then(function(){if(!i.L.loadingFailed)return t()})},g.prototype.T=function(){var t=this;this.r.svg.addEventListener("mousedown",function(i){!t.isLoadingCharData&&t.W&&(i.preventDefault(),t.X("startUserStroke",t.Y(i)))}),this.r.svg.addEventListener("touchstart",function(i){!t.isLoadingCharData&&t.W&&(i.preventDefault(),t.X("startUserStroke",t.$(i)))}),this.r.svg.addEventListener("mousemove",function(i){!t.isLoadingCharData&&t.W&&(i.preventDefault(),t.X("continueUserStroke",t.Y(i)))}),this.r.svg.addEventListener("touchmove",function(i){!t.isLoadingCharData&&t.W&&(i.preventDefault(),t.X("continueUserStroke",t.$(i)))}),i.document.addEventListener("mouseup",function(){return t.X("endUserStroke")}),i.document.addEventListener("touchend",function(){return t.X("endUserStroke")})},g.prototype.X=function(t){var i;if(this.W){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(i=this.W)[t].apply(i,r)}},g.prototype.Y=function(t){var i=this.r.svg.getBoundingClientRect();return this.Z.convertExternalPoint(new u(t.clientX-i.left,t.clientY-i.top))},g.prototype.$=function(t){var i=this.r.svg.getBoundingClientRect(),n=t.touches[0].clientX-i.left,r=t.touches[0].clientY-i.top;return this.Z.convertExternalPoint(new u(n,r))},g.prototype._=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.F.animate(t,i)},g.prototype.U=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.B(function(){return i._(t,n)})},void 0!==i.window){var k=i.window.HanziWriter;g.noConflict=function(){return i.window.HanziWriter=k,g},i.window.HanziWriter=g}t.exports=g}).call(i,n(2))},function(t,i,n){"use strict";var r=n(3),s=n(7),u=n(0),o=u.inherits,h=u.assign,e=n(4),c=function(t,i){return t.character?h({usePolygonMasks:t.options.usePolygonMasks},t.character[i]):t};function f(t,i){f.super_.call(this),this.H=t,this.Z=i,this.tt=this.registerChild(new s(t)),this.it=this.registerChild(new s(t)),this.nt=this.registerChild(new s(t))}o(f,r),f.prototype.mount=function(t,i){var n=t.createSubCanvas(),r=n.svg;e.attr(r,"transform","\n    translate("+this.Z.getXOffset()+", "+(this.Z.getHeight()-this.Z.getYOffset())+")\n    scale("+this.Z.getScale()+", "+-1*this.Z.getScale()+")\n  "),this.it.mount(n,c(i,"outline")),this.tt.mount(n,c(i,"main")),this.nt.mount(n,c(i,"highlight"))},f.prototype.render=function(t){this.it.render(c(t,"outline")),this.tt.render(c(t,"main")),this.nt.render(c(t,"highlight"))},t.exports=f},function(t,i,n){"use strict";var r=n(3),s=n(8),u=n(0),o=u.assign,h=function(t,i){return i.strokes?o({usePolygonMasks:i.usePolygonMasks,strokeColor:i.strokeColor,radicalColor:i.radicalColor,strokeWidth:i.strokeWidth},i.strokes[t]):i};function e(t){var i=this;e.super_.call(this),this.rt={},this.character=t,this.strokeRenderers=this.character.strokes.map(function(t){return i.registerChild(new s(t))})}(0,u.inherits)(e,r),e.prototype.mount=function(t,i){var n=t.createSubCanvas();this.st=n.svg,this.strokeRenderers.forEach(function(t,r){t.mount(n,h(r,i))})},e.prototype.render=function(t){t.opacity!==this.rt.opacity&&(this.st.style.opacity=t.opacity);for(var i=0;i<this.strokeRenderers.length;i+=1)this.strokeRenderers[i].render(h(i,t));this.rt=t},t.exports=e},function(t,i,n){"use strict";var r=n(3),s=n(0),u=s.counter,o=s.inherits,h=n(4),e=n(9),c=e.extendPointOnLine,f=e.getLineSegmentsPortion,a=e.getLineSegmentsLength,v=e.filterParallelPoints,l=e.linesToPolygon,d=200;function w(t){w.super_.call(this),this.rt={},this.ut=t,this.ot=a(t.points)+d/2}o(w,r),w.prototype.mount=function(t,i){var n=i.usePolygonMasks;this.ht=h.createElm("path");var r=n?"clipPath":"mask";this.et=h.createElm(r),this.ct=h.createElm("path");var s="mask-"+u();h.attr(this.et,"id",s),h.attr(this.ht,"d",this.ut.path),this.ht.style.opacity=0;var o=n?"clip-path":"mask";return h.attr(this.ht,o,"url(#"+s+")"),this.extendedMaskPoints=function(t,i){if(t.length<2)return t;var n=t[1],r=t[0],s=c(n,r,i),u=t.slice(1);return u.unshift(s),u}(v(this.ut.points),d/2),n?(this.extendedMaskPoints=function(t,i){if(t.length<2)return t;var n=t[t.length-2],r=t[t.length-1],s=c(n,r,i),u=t.slice(0,t.length-1);return u.push(s),u}(this.extendedMaskPoints,d/2),this.ft=h.createElm("circle"),this.et.appendChild(this.ft),h.attr(this.ft,"r",d/2),this.at(1)):(h.attr(this.ct,"d",h.getPathString(this.extendedMaskPoints)),h.attrs(this.ct,{stroke:"#FFFFFF","stroke-width":d,fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":this.ot+","+this.ot})),this.et.appendChild(this.ct),t.defs.appendChild(this.et),t.svg.appendChild(this.ht),this},w.prototype.render=function(t){if(!this.u){var i=t.usePolygonMasks;t.displayPortion!==this.rt.displayPortion&&(i?this.at(t.displayPortion):this.ct.style["stroke-dashoffset"]=this.vt(t.displayPortion));var n=this.lt(t);n!==this.lt(this.rt)&&h.attrs(this.ht,{fill:n,stroke:n}),t.strokeWidth!==this.rt.strokeWidth&&h.attrs(this.ht,{strokeWidth:t.strokeWidth}),t.opacity!==this.rt.opacity&&(this.ht.style.opacity=t.opacity),this.rt=t}},w.prototype.at=function(t){var i=f(this.extendedMaskPoints,t),n=h.getPathString(l(i,d),!0),r=i[i.length-1];h.attr(this.ct,"d",n),h.attr(this.ft,"cx",r.x),h.attr(this.ft,"cy",r.y)},w.prototype.vt=function(t){return.999*this.ot*(1-t)},w.prototype.lt=function(t){var i=t.strokeColor,n=t.radicalColor;return n&&this.ut.isInRadical?n:i},t.exports=w},function(t,i,n){"use strict";var r=n(1),s=function(t,i,n){var s=t.subtract(i),u=n/s.getMagnitude(),o=new r(u*s.y,-1*u*s.x);return[t.add(o),t.subtract(o)]},u=function(t,i,n,s){var u=t.x,o=i.x,h=n.x,e=s.x,c=t.y,f=i.y,a=n.y,v=s.y,l=(u-o)*(a-v)-(c-f)*(h-e);return new r(((u*f-c*o)*(h-e)-(u-o)*(h*v-a*e))/l,((u*f-c*o)*(a-v)-(c-f)*(h*v-a*e))/l)},o=function(t){for(var i=0,n=1;n<t.length;n+=1)i+=r.getDistance(t[n],t[n-1]);return i};t.exports={extendPointOnLine:function(t,i,n){var s=i.subtract(t),u=n/s.getMagnitude();return new r(i.x+u*s.x,i.y+u*s.y)},filterParallelPoints:function(t){if(t.length<3)return t;var i=[t[0],t[1]];return t.slice(2).forEach(function(t,n){var r=i.length,s=t.subtract(i[r-1]),u=i[r-1].subtract(i[r-2]);s.y*u.x-s.x*u.y==0&&i.pop(),i.push(t)}),i},getLineSegmentsLength:o,getLineSegmentsPortion:function(t,i){if(t.length<2||i>=1)return t;if(0===i)return[t[0]];for(var n=o(t),s=[t[0]],u=n*i,h=0,e=1;e<t.length;e+=1){var c=t[e-1],f=r.getDistance(t[e],c);if(h+f>=u){var a=t[e].subtract(c),v=(u-h)/f;return s.push(new r(c.x+v*a.x,c.y+v*a.y)),s}h+=f,s.push(t[e])}return s},getLinesIntersectPoint:u,getPerpendicularPointsAtDist:s,linesToPolygon:function(t,i){if(t.length<2)return t;for(var n=i/2,o=[],h=[],e=1;e<t.length;e+=1){var c=s(t[e-1],t[e],n),f=s(t[e],t[e-1],n);o.push({start:c[0],end:f[1]}),h.push({start:c[1],end:f[0]})}for(var a=[o[0].start],v=[h[0].start],l=1;l<o.length;l+=1){var d=u(o[l-1].start,o[l-1].end,o[l].start,o[l].end),w=u(h[l-1].start,h[l-1].end,h[l].start,h[l].end);a.push(d),v.push(w)}var y=o[o.length-1].end,m=h[h.length-1].end,g=u(a[a.length-1],v[v.length-1],y,m);if(r.getDistance(g,t[t.length-1])<n){var k=y.subtract(t[t.length-1]),p=g.subtract(t[t.length-1]);k.x*p.x+k.y*p.y>0?y=g:m=g}return a.push(y),v.push(m),v.reverse(),a.concat(v)}}},function(t,i,n){"use strict";var r=n(0).copyAndMergeDeep;function s(t,i,n){this.dt=n,this.state={options:{usePolygonMasks:i.usePolygonMasks,drawingFadeDuration:i.drawingFadeDuration,drawingWidth:i.drawingWidth,strokeWidth:i.strokeWidth},character:{main:{strokeColor:i.strokeColor,radicalColor:i.radicalColor,opacity:i.showCharacter?1:0,strokes:{}},outline:{strokeColor:i.outlineColor,opacity:i.showOutline?1:0,strokes:{}},highlight:{strokeColor:i.highlightColor,opacity:1,strokes:{}}}};for(var r=0;r<t.strokes.length;r+=1)this.state.character.main.strokes[r]={opacity:1,displayPortion:1},this.state.character.outline.strokes[r]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[r]={opacity:1,displayPortion:1}}s.prototype.updateState=function(t){var i=r(this.state,t);this.dt(i,this.state),this.state=i},t.exports=s},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,u=void 0;try{for(var o,h=t[Symbol.iterator]();!(r=(o=h.next()).done)&&(n.push(o.value),!i||n.length!==i);r=!0);}catch(t){s=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(s)throw u}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(1),u=n(12),o=n(13);function h(){}h.prototype.generateCharacter=function(t,i){var n=this.generateStrokes(i);return new o(t,n)},h.prototype.generateStrokes=function(t){return t.strokes.map(function(i,n){var o,h=t.medians[n].map(function(t){var i=r(t,2),n=i[0],u=i[1];return new s(n,u)});return new u(i,h,n,(o=n,t.radStrokes&&t.radStrokes.indexOf(o)>=0))})},t.exports=h},function(t,i,n){"use strict";var r=n(1);function s(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.path=t,this.points=i,this.strokeNum=n,this.isInRadical=r}s.prototype.getStrokeNum=function(){return this.strokeNum},s.prototype.getStartingPoint=function(){return this.points[0]},s.prototype.getEndingPoint=function(){return this.points[this.points.length-1]},s.prototype.getLength=function(){var t=this.points[0];return this.points.slice(1).reduce(function(i,n){var s=r.getDistance(n,t);return t=n,i+s},0)},s.prototype.getVectors=function(){var t=this.points[0];return this.points.slice(1).map(function(i){var n=i.subtract(t);return t=i,n})},s.prototype.getDistance=function(t){var i=this.points.map(function(i){return r.getDistance(i,t)});return Math.min.apply(Math,i)},s.prototype.getAverageDistance=function(t){var i=this;return t.reduce(function(t,n){return t+i.getDistance(n)},0)/t.length},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.symbol=t,this.strokes=i}s.prototype.getStroke=function(t){return this.strokes[t]},s.prototype.getNumStrokes=function(){return this.strokes.length},s.prototype.getBounds=function(){return r.getBounds([new r(0,900),new r(1024,-124)])},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.H=t,this.D=i,this.wt()}s.prototype.convertExternalPoint=function(t){var i=(t.x-this.yt)/this.mt,n=(this.getHeight()-this.gt-t.y)/this.mt;return new r(i,n)},s.prototype.getXOffset=function(){return this.yt},s.prototype.getYOffset=function(){return this.gt},s.prototype.getScale=function(){return this.mt},s.prototype.getHeight=function(){return this.D.height},s.prototype.wt=function(){var t=this.H.getBounds(),i=t[1].x-t[0].x,n=t[1].y-t[0].y,r=this.D.width-2*this.D.padding,s=this.D.height-2*this.D.padding,u=r/i,o=s/n;this.mt=Math.min(u,o);var h=this.D.padding+(r-this.mt*i)/2,e=this.D.padding+(s-this.mt*n)/2;this.yt=-1*t[0].x*this.mt+h,this.gt=-1*t[0].y*this.mt+e},t.exports=s},function(t,i,n){"use strict";var r=n(16),s=n(17),u=n(18),o=n(0).callIfExists;function h(t){var i=t.canvas,n=t.animator,s=t.character,u=t.characterRenderer,o=t.highlightRenderer,h=t.quizOptions,e=t.userStrokeOptions;this.r=i,this.F=n,this.H=s,this.I=u,this.N=o,this.kt=h,this.z=e,this.pt=0,this.bt=0,this.St=0,this.Mt=[],this.a=!0,this.Pt=new r,this.jt()}h.prototype.startUserStroke=function(t){return this.a?this.Ot?this.endUserStroke():(this.Ot=new s(t),this.Ct=new u(this.Ot,this.z),void this.Ct.setCanvas(this.r).draw()):null},h.prototype.continueUserStroke=function(t){this.Ot&&(this.Ot.appendPoint(t),this.Ct.updatePath())},h.prototype.endUserStroke=function(){var t=this;if(!this.Ot)return Promise.resolve();this.F.animate(function(i){if(!t.a)return Promise.resolve();var n=[],r=t.Ft(),s=t.Pt.strokeMatches(t.Ot,r);return n.push(t.Ct.fadeAndRemove(i)),t.Ot=null,t.Ct=null,s?n.push(t.Dt(r,i)):(t.At(),t.bt>=t.kt.showHintAfterMisses&&n.push(t.Et(i))),Promise.all(n)})},h.prototype.cancel=function(){this.a=!1},h.prototype.Dt=function(t,i){var n=this;o(this.kt.onCorrectStroke,{character:this.H.symbol,strokeNum:this.pt,mistakesOnStroke:this.bt,totalMistakes:this.St,strokesRemaining:this.H.getNumStrokes()-this.pt-1}),this.pt+=1,this.bt=0;var r=this.Lt(t,i);return this.pt===this.H.getNumStrokes()&&(this.a=!1,o(this.kt.onComplete,{character:this.H.symbol,totalMistakes:this.St}),this.kt.highlightOnComplete&&(r=r.then(function(){return n.N.flash(i)}))),r},h.prototype.At=function(){this.bt+=1,this.St+=1,o(this.kt.onMistake,{character:this.H.symbol,strokeNum:this.pt,mistakesOnStroke:this.bt,totalMistakes:this.St,strokesRemaining:this.H.getNumStrokes()-this.pt})},h.prototype.Et=function(t){return this.N.getStrokeRenderer(this.pt).highlight(t)},h.prototype.Lt=function(t,i){return this.Mt.push(t),this.I.showStroke(t.strokeNum,i)},h.prototype.Ft=function(){return this.H.getStroke(this.pt)},h.prototype.jt=function(){var t=this;this.F.animate(function(i){return t.I.hide(i)})},t.exports=h},function(t,i,n){"use strict";var r=n(1),s=n(0).average;function u(){}u.prototype.strokeMatches=function(t,i){var n=this.Tt(t.points);if(n.length<2)return null;var r=i.getAverageDistance(n)<300,s=this.Wt(n,i),u=this.xt(n,i);return r&&s&&u},u.prototype.Wt=function(t,i){var n=r.getDistance(i.getStartingPoint(),t[0]),s=r.getDistance(i.getEndingPoint(),t[t.length-1]);return n<250&&s<250},u.prototype.xt=function(t,i){var n=this.Ut(t),u=i.getVectors(),o=n.map(function(t){var i=u.map(function(i){return r.cosineSimilarity(i,t)});return Math.max.apply(Math,i)});return s(o)>0},u.prototype.Tt=function(t){if(t.length<2)return t;var i=[t[0]];return t.slice(1).forEach(function(t){t.equals(i[i.length-1])||i.push(t)}),i},u.prototype.It=function(t){var i=0,n=t[0];return t.forEach(function(t){i+=r.getDistance(t,n),n=t}),i},u.prototype.Ut=function(t){var i=[],n=t[0];return t.slice(1).forEach(function(t){i.push(t.subtract(n)),n=t}),i},t.exports=u},function(t,i,n){"use strict";var r=n(1);function s(t){this.points=[t]}s.prototype.getBounds=function(){return r.getBounds(this.points)},s.prototype.appendPoint=function(t){this.points.push(t)},t.exports=s},function(t,i,n){"use strict";var r=n(3),s=n(0).inherits,u=n(4);function o(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.super_.call(this),this.options=i,this.userStroke=t}s(o,r),o.prototype.getPathString=function(){return u.getPathString(this.userStroke.points)},o.prototype.updatePath=function(){u.attr(this.path,"d",this.getPathString())},o.prototype.draw=function(){return o.super_.prototype.draw.call(this),this.path=u.createElm("path"),u.attrs(this.path,this.getStrokeAttrs()),this.path.style.opacity=1,this.updatePath(),this.canvas.svg.appendChild(this.path),this},o.prototype.fadeAndRemove=function(t){var i=this,n=new u.StyleTween(this.path,"opacity",0,{duration:this.options.fadeDuration});return t.registerSvgAnimation(n),n.start().then(function(){return i.destroy()})},o.prototype.getStrokeAttrs=function(){return{fill:"none",stroke:this.options.strokeColor,"stroke-width":this.options.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"}},t.exports=o},function(t,i,n){"use strict";(function(i){t.exports=function(t,n,r){var s=new i.XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("application/json"),s.open("GET","https://cdn.jsdelivr.net/npm/hanzi-writer-data@1/"+t+".json",!0),s.onerror=function(t){r(s,t)},s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n(JSON.parse(s.responseText)):r&&r(s))},s.send(null)}}).call(i,n(2))},function(t,i,n){"use strict";var r=n(21);function s(){this.Rt=null}s.prototype.animate=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.Bt(i);return t(n).then(function(){return n.finish()})},s.prototype.Bt=function(t){return this.cancel(),this.Rt=new r(t),this.Rt},s.prototype.cancel=function(){this.Rt&&this.Rt.cancel()},t.exports=s},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.Gt=[],this.a=!0,this.Ht=t.onComplete}s.prototype.cancel=function(){this.isActive()&&(this.a=!1,this.Gt.forEach(function(t){return t.finish()}))},s.prototype.registerSvgAnimation=function(t){-1===this.Gt.indexOf(t)&&this.Gt.push(t)},s.prototype.isActive=function(){return this.a},s.prototype.finish=function(){this.isActive()&&(this.a=!1,r(this.Ht))},t.exports=s},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(t){this.Nt=0,this.D=t,this.zt=!1,this.qt=null,this.loadingFailed=!1}s.prototype.Jt=function(t,i){var n=this,r=function(t){i===n.Nt&&n.j(t)},s=this.D.charDataLoader(t,r,function(t){i===n.Nt&&n.Vt(t)});s&&r(s)},s.prototype.Zt=function(){var t=this;this.qt=new Promise(function(i,n){t.j=i,t.Vt=n}).then(function(i){return t.zt=!1,r(t.D.onLoadCharDataSuccess,i),i},function(i){if(t.zt=!1,t.loadingFailed=!0,r(t.D.onLoadCharDataError,i),!t.D.onLoadCharDataError){if(i instanceof Error)throw i;var n=new Error("Failed to load char data for "+t.Kt);throw n.reason=i,n}})},s.prototype.loadCharData=function(t){return this.Kt=t,this.zt||this.Zt(),this.loadingFailed=!1,this.zt=!0,this.Nt+=1,this.Jt(t,this.Nt),this.qt},t.exports=s}]);