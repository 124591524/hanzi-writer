/*! Hanzi Writer v0.6.0 | https://chanind.github.io/hanzi-writer */
!function(t){var i={};function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=6)}([function(t,i,n){"use strict";(function(i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=i.performance&&function(){return i.performance.now()}||function(){return Date.now()},s=i.requestAnimationFrame||function(t){return setTimeout(function(){return t(r())},1e3/60)},o=i.cancelAnimationFrame||clearTimeout,e=Object.assign||function(t){for(var i=Object(t),n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(function(t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}),i};function u(t){return Math.max.apply(null,t)}function h(t){return Math.min.apply(null,t)}var c=0;t.exports={arrayMax:u,arrayMin:h,assign:e,average:function(t){return t.reduce(function(t,i){return i+t},0)/t.length},callIfExists:function(t,i){return t&&t(i),i},cancelAnimationFrame:o,copyAndMergeDeep:function t(i,r){var s=e({},i);for(var o in r){var u=i[o],h=r[o];u!==h&&(u&&h&&"object"===(void 0===u?"undefined":n(u))&&"object"===(void 0===h?"undefined":n(h))&&!Array.isArray(h)?s[o]=t(u,h):s[o]=h)}return s},counter:function(){return++c},emptyFunc:function(){},getExtremes:function(t){var i=u(t),n=h(t);return[i,(i+n)/2,n]},inflate:function(t,i){for(var n=t.split("."),r={},s=r,o=0;o<n.length;o++){var e=o===n.length-1?i:{};s[n[o]]=e,s=e}return r},objRepeat:function(t,i){for(var n={},r=0;r<i;r++)n[r]=t;return n},performanceNow:r,requestAnimationFrame:s,timeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(i,n){setTimeout(i,t)})}}}).call(i,n(2))},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,o=void 0;try{for(var e,u=t[Symbol.iterator]();!(r=(e=u.next()).done)&&(n.push(e.value),!i||n.length!==i);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(s)throw o}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(0),o=s.arrayMin,e=s.arrayMax;function u(t,i){this.x=parseFloat(t,10),this.y=parseFloat(i,10)}u.prototype.subtract=function(t){return new u(this.x-t.x,this.y-t.y)},u.prototype.add=function(t){return new u(this.x+t.x,this.y+t.y)},u.prototype.getMagnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},u.prototype.equals=function(t){return!!t&&(t.x===this.x&&t.y===this.y)},u.getBounds=function(t){var i=t.map(function(t){return t.x}),n=t.map(function(t){return t.y}),r=e(i),s=e(n);return[new u(o(i),o(n)),new u(r,s)]},u.getOverallBounds=function(t){var i=[];return t.forEach(function(t){var n=t.getBounds(),s=r(n,2),o=s[0],e=s[1];i.push(o),i.push(e)}),u.getBounds(i)},u.getDistance=function(t,i){return t.subtract(i).getMagnitude()},u.cosineSimilarity=function(t,i){return(t.x*i.x+t.y*i.y)/t.getMagnitude()/i.getMagnitude()},t.exports=u},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){"use strict";(function(i){function n(t){return i.document.createElementNS("http://www.w3.org/2000/svg",t)}function r(t,i,n){t.setAttributeNS(null,i,n)}function s(t,i){Object.keys(i).forEach(function(n){return r(t,n,i[n])})}function o(t,i){this.svg=t,this.defs=i}o.prototype.createSubCanvas=function(){var t=n("g");return this.svg.appendChild(t),new o(t,this.defs)},o.init=function(t){var r=void 0,e=t;"string"==typeof t&&(e=i.document.getElementById(t));var u=e.nodeName.toUpperCase();"SVG"===u||"G"===u?r=e:(r=n("svg"),e.appendChild(r)),s(r,{width:"100%",height:"100%"});var h=n("defs");return r.appendChild(h),new o(r,h)},t.exports={createElm:n,attrs:s,attr:r,Canvas:o,getPathString:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0],r=t.slice(1),s="M "+n.x+" "+n.y;return r.forEach(function(t){s+=" L "+t.x+" "+t.y}),i&&(s+="Z"),s},removeElm:function(t){t&&t.parentNode.removeChild(t)}}}).call(i,n(2))},function(t,i,n){"use strict";function r(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var s=n(5),o=n(0).objRepeat,e=function(t,i,n){return[new s("character."+t+".strokes",o({opacity:1,displayPortion:1},i.strokes.length),{duration:n,force:!0})]},u=function(t,i,n){return[new s("character."+t+".opacity",0,{duration:n,force:!0})].concat(e(t,i,0))},h=function(t,i,n){var o=i.strokeNum,e=(i.getLength()+600)/(3*n);return[new s("character."+t,{opacity:1,strokes:r({},o,{displayPortion:0,opacity:1})}),new s("character."+t+".strokes."+o+".displayPortion",1,{duration:e})]},c=function(t,i,n,r,c){var a=u(t,i,n);return(a=a.concat(e(t,i,0))).push(new s("character."+t,{opacity:1,strokes:o({opacity:0},i.strokes.length)},{force:!0})),i.strokes.forEach(function(i,n){n>0&&a.push(new s.Pause(c)),a=a.concat(h(t,i,r))}),a};t.exports={showStrokes:e,hideStrokes:function(t,i,n){return[new s("character."+t+".strokes",o({opacity:0},i.strokes.length),{duration:n,force:!0})]},showCharacter:function(t,i,n){return[new s("character."+t,{opacity:1,strokes:o({opacity:1,displayPortion:1},i.strokes.length)},{duration:n,force:!0})]},hideCharacter:u,animateCharacter:c,animateCharacterLoop:function(t,i,n,r,o,e){var u=c(t,i,n,r,o);return u.push(new s.Pause(e)),u},animateStroke:h,highlightStroke:function(t,i,n){var o=i.strokeNum,e=(i.getLength()+600)/(3*n);return[new s("character."+t,{opacity:1,strokes:r({},o,{displayPortion:0,opacity:0})}),new s("character."+t+".strokes."+o,{displayPortion:1,opacity:1},{duration:e}),new s("character."+t+".strokes."+o+".opacity",0,{duration:e})]},showStroke:function(t,i,n){return[new s("character."+t,{opacity:1,strokes:r({},i,{displayPortion:1,opacity:1})},{duration:n})]}}},function(t,i,n){"use strict";var r=n(0),s=r.inflate,o=r.performanceNow,e=r.requestAnimationFrame,u=r.cancelAnimationFrame;function h(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scope=t,this.r=s(t,i),this.e=n.duration||0,this.u=n.force,this.h=this.a.bind(this)}function c(t){this.e=t}h.prototype.run=function(t){var i=this;return 0===this.e&&t.updateState(this.r),0===this.e||function t(i,n){for(var r in n)if(n.hasOwnProperty(r)){var s=n[r],o=i[r];if(s>=0){if(s!==o)return!1}else if(!t(o,s))return!1}return!0}(t.state,this.r)?Promise.resolve():(this.f=t,this.v=t.state,this.w=o(),this.k=e(this.h),new Promise(function(t){i.g=t}))},h.prototype.a=function(t){var i,n=Math.min(1,(t-this.w)/this.e);if(1===n)this.f.updateState(this.r),this.k=null,this.cancel(this.f);else{var r=(i=n,-Math.cos(i*Math.PI)/2+.5);this.f.updateState(function t(i,n,r){var s={};for(var o in n){var e=n[o],u=i[o];s[o]=e>=0?r*(e-u)+u:t(u,e,r)}return s}(this.v,this.r,r)),this.k=e(this.h)}},h.prototype.cancel=function(t){this.g&&this.g(),this.g=null,this.k&&u(this.k),this.k=null,this.u&&t.updateState(this.r)},c.prototype.run=function(){var t=this,i=new Promise(function(i){t.g=i});return this.S=setTimeout(function(){return t.cancel()},this.e),i},c.prototype.cancel=function(){clearTimeout(this.S),this.g&&this.g(),this.g=!1},h.Pause=c,t.exports=h},function(t,i,n){"use strict";(function(i){var r=n(7),s=n(12),o=n(1),e=n(13),u=n(16),h=n(17),c=n(3),a=n(21),f=n(22),v=n(4),l=n(0),d=l.assign,w=l.callIfExists,p={charDataLoader:a,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",showHintAfterMisses:3,highlightOnComplete:!0,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2};function y(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.b=c.Canvas.init(t),this.P=this.C(n),this.M=new f(this.P),this.setCharacter(i),this.j(),this.F=null}if(y.prototype.showCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.O(function(){return t.f.run(v.showCharacter("main",t.A,i.duration||t.P.strokeFadeDuration)).then(function(t){return w(i.onComplete,t)})})},y.prototype.hideCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.O(function(){return t.f.run(v.hideCharacter("main",t.A,i.duration||t.P.strokeFadeDuration)).then(function(t){return w(i.onComplete,t)})})},y.prototype.animateCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.O(function(){return t.f.run(v.animateCharacter("main",t.A,t.P.strokeFadeDuration,t.P.strokeAnimationSpeed,t.P.delayBetweenStrokes)).then(function(t){return w(i.onComplete,t)})})},y.prototype.loopCharacterAnimation=function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cancelQuiz(),this.O(function(){return t.f.run(v.animateCharacterLoop("main",t.A,t.P.strokeFadeDuration,t.P.strokeAnimationSpeed,t.P.delayBetweenStrokes,t.P.delayBetweenLoops),{loop:!0})})},y.prototype.showOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.O(function(){return t.f.run(v.showCharacter("outline",t.A,i.duration||t.P.strokeFadeDuration)).then(function(t){return w(i.onComplete,t)})})},y.prototype.hideOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.O(function(){return t.f.run(v.hideCharacter("outline",t.A,i.duration||t.P.strokeFadeDuration)).then(function(t){return w(i.onComplete,t)})})},y.prototype.quiz=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.O(function(){t.cancelQuiz(),t.F=new h(t.A,t.f),t.F.startQuiz(d({},t.P,i))})},y.prototype.cancelQuiz=function(){this.F&&this.F.cancel()},y.prototype.setCharacter=function(t){var i=this;return this.cancelQuiz(),this.D=t,this.U&&this.U.destroy(),this.f&&this.f.cancelAll(),this.U=null,this.T=this.M.loadCharData(t).then(function(n){if(!i.M.loadingFailed){var o=new e;i.A=o.generateCharacter(t,n),i.L=new u(i.A,i.P),i.U=new r(i.A,i.L),i.f=new s(i.A,i.P,function(t){i.U.render(t)}),i.U.mount(i.b,i.f.state),i.U.render(i.f.state)}}),this.T},y.prototype.C=function(t){var i=d({},p,t);return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(i.strokeAnimationSpeed=500/i.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(i.strokeHighlightSpeed=500/i.strokeHighlightDuration),this._(i)},y.prototype._=function(t){var i=d({},t);if(i.width&&!i.height)i.height=i.width;else if(i.height&&!i.width)i.width=i.height;else if(!i.width&&!i.height){var n=this.b.svg.getBoundingClientRect(),r=n.width,s=n.height,o=Math.min(r,s);i.width=o,i.height=o}return i},y.prototype.O=function(t){var i=this;return this.M.loadingFailed?(this.setCharacter(this.D),Promise.resolve().then(function(){if(!i.M.loadingFailed)return i.O(t)})):this.T.then(function(){if(!i.M.loadingFailed)return t()})},y.prototype.j=function(){var t=this;this.b.svg.addEventListener("mousedown",function(i){!t.isLoadingCharData&&t.F&&(i.preventDefault(),t.W("startUserStroke",t.I(i)))}),this.b.svg.addEventListener("touchstart",function(i){!t.isLoadingCharData&&t.F&&(i.preventDefault(),t.W("startUserStroke",t.N(i)))}),this.b.svg.addEventListener("mousemove",function(i){!t.isLoadingCharData&&t.F&&(i.preventDefault(),t.W("continueUserStroke",t.I(i)))}),this.b.svg.addEventListener("touchmove",function(i){!t.isLoadingCharData&&t.F&&(i.preventDefault(),t.W("continueUserStroke",t.N(i)))}),i.document.addEventListener("mouseup",function(){return t.W("endUserStroke")}),i.document.addEventListener("touchend",function(){return t.W("endUserStroke")})},y.prototype.W=function(t){var i;if(this.F){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(i=this.F)[t].apply(i,r)}},y.prototype.I=function(t){var i=this.b.svg.getBoundingClientRect();return this.L.convertExternalPoint(new o(t.clientX-i.left,t.clientY-i.top))},y.prototype.N=function(t){var i=this.b.svg.getBoundingClientRect(),n=t.touches[0].clientX-i.left,r=t.touches[0].clientY-i.top;return this.L.convertExternalPoint(new o(n,r))},void 0!==i.window){var k=i.window.HanziWriter;y.noConflict=function(){return i.window.HanziWriter=k,y},i.window.HanziWriter=y}t.exports=y}).call(i,n(2))},function(t,i,n){"use strict";var r=n(8),s=n(11),o=n(0).assign,e=n(3);function u(t,i){this.A=t,this.L=i,this.z=new r(t),this.G=new r(t),this.H=new r(t),this.R={}}u.prototype.mount=function(t){var i=t.createSubCanvas(),n=i.svg;e.attr(n,"transform","\n    translate("+this.L.getXOffset()+", "+(this.L.getHeight()-this.L.getYOffset())+")\n    scale("+this.L.getScale()+", "+-1*this.L.getScale()+")\n  "),this.G.mount(i),this.z.mount(i),this.H.mount(i),this.q=i},u.prototype.render=function(t){var i=this;this.G.render(t.character.outline),this.z.render(t.character.main),this.H.render(t.character.highlight);var n=t.userStrokes||{};Object.keys(this.R).forEach(function(t){n[t]||(i.R[t].destroy(),delete i.R[t])}),Object.keys(n).forEach(function(r){if(n[r]){var e=o({strokeWidth:t.options.drawingWidth,strokeColor:t.options.drawingColor},n[r]),u=i.R[r];u||((u=new s).mount(i.q,e),i.R[r]=u),u.render(e)}})},u.prototype.destroy=function(){e.removeElm(this.q.svg),this.q.defs.innerHTML=""},t.exports=u},function(t,i,n){"use strict";var r=n(9);function s(t){this.B={},this.character=t,this.strokeRenderers=this.character.strokes.map(function(t){return new r(t)})}s.prototype.mount=function(t){var i=t.createSubCanvas();this.J=i.svg,this.strokeRenderers.forEach(function(t,n){t.mount(i)})},s.prototype.render=function(t){if(t!==this.B){t.opacity!==this.B.opacity&&(this.J.style.opacity=t.opacity,0===t.opacity?this.J.style.display="none":0===this.B.opacity&&(this.J.style.display="initial"));for(var i=0;i<this.strokeRenderers.length;i++)this.strokeRenderers[i].render({strokeColor:t.strokeColor,radicalColor:t.radicalColor,opacity:t.strokes[i].opacity,displayPortion:t.strokes[i].displayPortion});this.B=t}},t.exports=s},function(t,i,n){"use strict";var r=n(0).counter,s=n(3),o=n(10),e=o.extendPointOnLine,u=o.filterParallelPoints,h=200;function c(t){this.B={},this.Q=t,this.V=t.getLength()+h/2}c.prototype.mount=function(t){this.Z=s.createElm("path"),this.K=s.createElm("clipPath"),this.X=s.createElm("path");var i="mask-"+r();s.attr(this.K,"id",i),s.attr(this.X,"d",this.Q.path),this.Z.style.opacity=0,s.attr(this.Z,"clip-path","url(#"+i+")");var n=function(t,i){if(t.length<2)return t;var n=t[1],r=t[0],s=e(n,r,i),o=t.slice(1);return o.unshift(s),o}(u(this.Q.points),h/2);return s.attr(this.Z,"d",s.getPathString(n)),s.attrs(this.Z,{stroke:"#FFFFFF","stroke-width":h,fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":this.V+","+this.V}),this.K.appendChild(this.X),t.defs.appendChild(this.K),t.svg.appendChild(this.Z),this},c.prototype.render=function(t){if(t!==this.B){t.displayPortion!==this.B.displayPortion&&(this.Z.style.strokeDashoffset=this.Y(t.displayPortion));var i=this.$(t);i!==this.$(this.B)&&s.attrs(this.Z,{stroke:i}),t.opacity!==this.B.opacity&&(this.Z.style.opacity=t.opacity),this.B=t}},c.prototype.Y=function(t){return.999*this.V*(1-t)},c.prototype.$=function(t){var i=t.strokeColor,n=t.radicalColor;return n&&this.Q.isInRadical?n:i},t.exports=c},function(t,i,n){"use strict";var r=n(1);t.exports={extendPointOnLine:function(t,i,n){var s=i.subtract(t),o=n/s.getMagnitude();return new r(i.x+o*s.x,i.y+o*s.y)},filterParallelPoints:function(t){if(t.length<3)return t;var i=[t[0],t[1]];return t.slice(2).forEach(function(t,n){var r=i.length,s=t.subtract(i[r-1]),o=i[r-1].subtract(i[r-2]);s.y*o.x-s.x*o.y==0&&i.pop(),i.push(t)}),i}}},function(t,i,n){"use strict";var r=n(3);function s(){this.B={}}s.prototype.mount=function(t){this.tt=r.createElm("path"),t.svg.appendChild(this.tt)},s.prototype.render=function(t){t!==this.B&&(t.strokeColor===this.B.strokeColor&&t.strokeWidth===this.B.strokeWidth||r.attrs(this.tt,{fill:"none",stroke:t.strokeColor,"stroke-width":t.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"}),t.opacity!==this.B.opacity&&r.attr(this.tt,"opacity",t.opacity),t.points!==this.B.points&&r.attr(this.tt,"d",r.getPathString(t.points)),this.B=t)},s.prototype.destroy=function(){r.removeElm(this.tt)},t.exports=s},function(t,i,n){"use strict";var r=n(0).copyAndMergeDeep;function s(t,i,n){this.it=n,this.nt=[],this.state={options:{drawingFadeDuration:i.drawingFadeDuration,drawingWidth:i.drawingWidth,drawingColor:i.drawingColor},character:{main:{strokeColor:i.strokeColor,radicalColor:i.radicalColor,opacity:i.showCharacter?1:0,strokes:{}},outline:{strokeColor:i.outlineColor,opacity:i.showOutline?1:0,strokes:{}},highlight:{strokeColor:i.highlightColor,opacity:1,strokes:{}}},userStrokes:null};for(var r=0;r<t.strokes.length;r++)this.state.character.main.strokes[r]={opacity:1,displayPortion:1},this.state.character.outline.strokes[r]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[r]={opacity:0,displayPortion:1}}s.prototype.updateState=function(t){var i=r(this.state,t);this.it(i,this.state),this.state=i},s.prototype.run=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.map(function(t){return t.scope}).filter(function(t){return t});return this.cancelMutations(r),new Promise(function(s){var o={rt:!0,st:0,g:s,ot:t,et:n.loop,ut:r};i.nt.push(o),i.ht(o)})},s.prototype.ht=function(t){var i=this;if(t.rt){var n=t.ot;if(t.st>=n.length){if(!t.et)return t.rt=!1,this.nt=this.nt.filter(function(i){return i!==t}),void t.g({canceled:!1});t.st=0}t.ot[t.st].run(this).then(function(){t.rt&&(t.st++,i.ht(t))})}},s.prototype.cancelMutations=function(t){var i=this;this.nt.forEach(function(n){n.ut.forEach(function(r){t.forEach(function(t){r.indexOf(t)>=0&&i.ct(n)})})})},s.prototype.cancelAll=function(){this.cancelMutations([""])},s.prototype.ct=function(t){t.rt=!1;for(var i=t.st;i<t.ot.length;i++)t.ot[i].cancel(this);t.g&&t.g({canceled:!0}),this.nt=this.nt.filter(function(i){return i!==t})},t.exports=s},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,o=void 0;try{for(var e,u=t[Symbol.iterator]();!(r=(e=u.next()).done)&&(n.push(e.value),!i||n.length!==i);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(s)throw o}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(1),o=n(14),e=n(15);function u(){}u.prototype.generateCharacter=function(t,i){var n=this.generateStrokes(i);return new e(t,n)},u.prototype.generateStrokes=function(t){return t.strokes.map(function(i,n){var e,u=t.medians[n].map(function(t){var i=r(t,2),n=i[0],o=i[1];return new s(n,o)});return new o(i,u,n,(e=n,t.radStrokes&&t.radStrokes.indexOf(e)>=0))})},t.exports=u},function(t,i,n){"use strict";var r=n(1);function s(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.path=t,this.points=i,this.strokeNum=n,this.isInRadical=r}s.prototype.getStartingPoint=function(){return this.points[0]},s.prototype.getEndingPoint=function(){return this.points[this.points.length-1]},s.prototype.getLength=function(){var t=this.points[0];return this.points.slice(1).reduce(function(i,n){var s=r.getDistance(n,t);return t=n,i+s},0)},s.prototype.getVectors=function(){var t=this.points[0];return this.points.slice(1).map(function(i){var n=i.subtract(t);return t=i,n})},s.prototype.getDistance=function(t){var i=this.points.map(function(i){return r.getDistance(i,t)});return Math.min.apply(Math,i)},s.prototype.getAverageDistance=function(t){var i=this;return t.reduce(function(t,n){return t+i.getDistance(n)},0)/t.length},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.symbol=t,this.strokes=i}s.prototype.getBounds=function(){return r.getBounds([new r(0,900),new r(1024,-124)])},t.exports=s},function(t,i,n){"use strict";var r=n(1);function s(t,i){this.A=t,this.P=i,this.at()}s.prototype.convertExternalPoint=function(t){var i=(t.x-this.ft)/this.vt,n=(this.getHeight()-this.lt-t.y)/this.vt;return new r(i,n)},s.prototype.getXOffset=function(){return this.ft},s.prototype.getYOffset=function(){return this.lt},s.prototype.getScale=function(){return this.vt},s.prototype.getHeight=function(){return this.P.height},s.prototype.at=function(){var t=this.A.getBounds(),i=t[1].x-t[0].x,n=t[1].y-t[0].y,r=this.P.width-2*this.P.padding,s=this.P.height-2*this.P.padding,o=r/i,e=s/n;this.vt=Math.min(o,e);var u=this.P.padding+(r-this.vt*i)/2,h=this.P.padding+(s-this.vt*n)/2;this.ft=-1*t[0].x*this.vt+u,this.lt=-1*t[0].y*this.vt+h},t.exports=s},function(t,i,n){"use strict";var r=n(18),s=n(19),o=n(0),e=o.callIfExists,u=o.counter,h=n(20),c=n(4);function a(t,i){this.A=t,this.f=i,this.rt=!1,this.dt=new r}a.prototype.startQuiz=function(t){this.rt=!0,this.P=t,this.wt=0,this.pt=0,this.yt=0,this.kt=[],this.f.run(h.startQuiz(this.A,t.strokeFadeDuration))},a.prototype.startUserStroke=function(t){if(!this.rt)return null;if(this.mt)return this.endUserStroke();var i=u();this.mt=new s(i,t),this.f.run(h.startUserStroke(i,t))},a.prototype.continueUserStroke=function(t){if(this.mt){this.mt.appendPoint(t);var i=this.mt.points.slice(0);this.f.run(h.updateUserStroke(this.mt.id,i))}},a.prototype.endUserStroke=function(){if(this.mt){this.f.run(h.removeUserStroke(this.mt.id,this.P.drawingFadeDuration));var t=this.gt(),i=this.dt.strokeMatches(this.mt,t);this.mt=null,i?this.St(t):(this.bt(),this.pt>=this.P.showHintAfterMisses&&this.f.run(c.highlightStroke("highlight",t,this.P.strokeHighlightSpeed)))}},a.prototype.cancel=function(){this.rt=!1,this.mt&&this.f.run(h.removeUserStroke(this.mt.id,this.P.drawingFadeDuration))},a.prototype.St=function(t){e(this.P.onCorrectStroke,{character:this.A.symbol,strokeNum:this.wt,mistakesOnStroke:this.pt,totalMistakes:this.yt,strokesRemaining:this.A.strokes.length-this.wt-1});var i=c.showStroke("main",this.wt,this.P.strokeFadeDuration);this.wt+=1,this.pt=0,this.wt===this.A.strokes.length&&(this.rt=!1,e(this.P.onComplete,{character:this.A.symbol,totalMistakes:this.yt}),this.P.highlightOnComplete&&(i=i.concat(c.hideCharacter("highlight",this.A)).concat(c.showCharacter("highlight",this.A,this.P.strokeHighlightDuration)).concat(c.hideCharacter("highlight",this.A,this.P.strokeHighlightDuration)))),this.f.run(i)},a.prototype.bt=function(){this.pt+=1,this.yt+=1,e(this.P.onMistake,{character:this.A.symbol,strokeNum:this.wt,mistakesOnStroke:this.pt,totalMistakes:this.yt,strokesRemaining:this.A.strokes.length-this.wt})},a.prototype.gt=function(){return this.A.strokes[this.wt]},t.exports=a},function(t,i,n){"use strict";var r=n(1),s=n(0).average;function o(){}o.prototype.strokeMatches=function(t,i){var n=this.Pt(t.points);if(n.length<2)return null;var r=i.getAverageDistance(n)<300,s=this.Ct(n,i),o=this.Mt(n,i);return r&&s&&o},o.prototype.Ct=function(t,i){var n=r.getDistance(i.getStartingPoint(),t[0]),s=r.getDistance(i.getEndingPoint(),t[t.length-1]);return n<250&&s<250},o.prototype.Mt=function(t,i){var n=this.jt(t),o=i.getVectors(),e=n.map(function(t){var i=o.map(function(i){return r.cosineSimilarity(i,t)});return Math.max.apply(Math,i)});return s(e)>0},o.prototype.Pt=function(t){if(t.length<2)return t;var i=[t[0]];return t.slice(1).forEach(function(t){t.equals(i[i.length-1])||i.push(t)}),i},o.prototype.Ft=function(t){var i=0,n=t[0];return t.forEach(function(t){i+=r.getDistance(t,n),n=t}),i},o.prototype.jt=function(t){var i=[],n=t[0];return t.slice(1).forEach(function(t){i.push(t.subtract(n)),n=t}),i},t.exports=o},function(t,i,n){"use strict";function r(t,i){this.id=t,this.points=[i]}r.prototype.appendPoint=function(t){this.points.push(t)},t.exports=r},function(t,i,n){"use strict";var r=n(5),s=n(4),o=n(0).objRepeat;t.exports={startQuiz:function(t,i){return s.hideCharacter("main",t,i).concat([new r("character.main",{opacity:1,strokes:o({opacity:0},t.strokes.length)})])},startUserStroke:function(t,i){return[new r("quiz.activeUserStrokeId",t,{force:!0}),new r("userStrokes."+t,{points:[i],opacity:1},{force:!0})]},updateUserStroke:function(t,i){return[new r("userStrokes."+t+".points",i,{force:!0})]},removeUserStroke:function(t,i){return[new r("userStrokes."+t+".opacity",0,{duration:i}),new r("userStrokes."+t,null,{force:!0})]}}},function(t,i,n){"use strict";(function(i){t.exports=function(t,n,r){var s=new i.XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("application/json"),s.open("GET","https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/"+t+".json",!0),s.onerror=function(t){r(s,t)},s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n(JSON.parse(s.responseText)):r&&r(s))},s.send(null)}}).call(i,n(2))},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(t){this.Ot=0,this.P=t,this.At=!1,this.Dt=null,this.loadingFailed=!1}s.prototype.Et=function(t,i){var n=this,r=function(t){i===n.Ot&&n.g(t)},s=this.P.charDataLoader(t,r,function(t){i===n.Ot&&n.Ut(t)});s&&r(s)},s.prototype.Tt=function(){var t=this;this.Dt=new Promise(function(i,n){t.g=i,t.Ut=n}).then(function(i){return t.At=!1,r(t.P.onLoadCharDataSuccess,i),i},function(i){if(t.At=!1,t.loadingFailed=!0,r(t.P.onLoadCharDataError,i),!t.P.onLoadCharDataError){if(i instanceof Error)throw i;var n=new Error("Failed to load char data for "+t.Lt);throw n.reason=i,n}})},s.prototype.loadCharData=function(t){return this.Lt=t,this.At||this.Tt(),this.loadingFailed=!1,this.At=!0,this.Ot++,this.Et(t,this.Ot),this.Dt},t.exports=s}]);